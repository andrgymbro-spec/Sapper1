Техническая документация: Проект "Сапёр" (Minesweeper API)
Дата: 27 февраля 2026 г.
Стек: Java 17, Spring Boot 3.2.3, JUnit 5, JaCoCo, Maven.

1. Описание архитектуры
Проект представляет собой RESTful-сервис для игры в «Сапёр». Архитектура построена на принципах слабой связанности (Low Coupling) и высокой связности (High Cohesion).

Controller Layer: Обрабатывает входящие HTTP-запросы, обеспечивая кросс-доменное взаимодействие через @CrossOrigin.

Service Layer: Содержит бизнес-логику управления игровыми сессиями с использованием ConcurrentHashMap для обеспечения потокобезопасности.

Domain Model: Класс GameInstance инкапсулирует состояние конкретной игры и алгоритмы её обработки.

2. Ключевые алгоритмические решения
2.1 Обход пустых областей (BFS)
Для открытия пустых клеток используется итеративный алгоритм обхода в ширину (Breadth-First Search). В отличие от рекурсивного DFS, данный подход исключает риск возникновения StackOverflowError на полях большого размера.

2.2 Управление памятью
В сервисе реализован механизм автоматической очистки ресурсов:

Метод: @Scheduled(fixedRate = 600000) (запуск каждые 10 минут).

Логика: Удаление игр, не имевших активности более 20 минут.

Цель: Предотвращение OutOfMemoryError при большом количестве брошенных сессий.

3. Тестирование и качество кода
Проект покрыт Unit и Integration тестами на уровне более 70%.

MockMvc: Имитация HTTP-вызовов для тестирования контроллеров и GlobalExceptionHandler.

Mockito: Изоляция зависимостей при тестировании веб-слоя.

JaCoCo: Инструмент для автоматического анализа покрытия кода.
4. Спецификация API
Метод    Эндпоинт     Описание 
POST    /api/new    Создание новой игры (макс. 30x30).
POST    /api/turn   Совершение хода. Возвращает актуальное поле или ошибку.
